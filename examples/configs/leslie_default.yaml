# Leslie Population Model (3D Map) - Default Configuration
# Reference: Leslie, P.H. (1945) "On the use of matrices in certain population
#            mathematics", Biometrika 33(3): 183-212

system:
  name: "leslie_map_3d"
  type: "map"
  description: "Three-age-class structured population dynamics"
  reference: "Leslie (1945), Biometrika 33(3): 183-212"

# System parameters
dynamics:
  theta_1: 37.5           # Fertility parameter for age class 0
  theta_2: 37.5           # Fertility parameter for age class 1
  theta_3: 37.5           # Fertility parameter for age class 2
  survival_1: 0.8         # Survival rate from age class 0 to 1
  survival_2: 0.6         # Survival rate from age class 1 to 2

# Computational domain
domain:
  bounds: [[0.0, 0.0, 0.0], [140.0, 112.0, 72.0]]
  equilibrium: [0.0, 0.0, 0.0]

# 3D grid parameters (original space)
cmgdb_3d:
  subdiv_min: 30          # Minimum subdivision depth
  subdiv_max: 33          # Maximum subdivision depth
  subdiv_init: 0          # Initial subdivision depth
  subdiv_limit: 100000    # Maximum number of boxes during refinement
  padding: false          # Boundary padding enabled

# 2D grid parameters (latent space)
cmgdb_2d:
  subdiv_min: 24          # Minimum subdivision depth
  subdiv_max: 30          # Maximum subdivision depth
  subdiv_init: 0          # Initial subdivision depth
  subdiv_limit: 100000    # Maximum number of boxes during refinement
  padding: true           # Boundary padding enabled
  bounds_padding: 1.01    # Bounding box expansion factor
  original_grid_subdiv: 18 # Original space grid subdivision for point sampling
  method: "restricted"    # 2D Morse graph method (data, restricted, enclosure)

# Training data generation
training:
  n_trajectories: 5000    # Number of trajectories to generate
  n_points: 20            # Points per trajectory
  skip_initial: 0         # Initial transient points to skip
  random_seed: 42         # Reproducibility seed
  num_epochs: 10000        # Maximum training epochs
  batch_size: 1024        # Training batch size
  learning_rate: 0.001    # Optimizer learning rate
  early_stopping_patience: 500   # Epochs without improvement before stopping
  min_delta: 1.0e-5       # Minimum loss improvement threshold

# Neural network architecture
model:
  input_dim: 3            # Input space dimension
  latent_dim: 2           # Latent space dimension
  hidden_dim: 32          # Hidden layer dimension
  num_layers: 5           # Number of hidden layers
  encoder_activation: tanh # null      # Encoder activation function
  decoder_activation: tanh # null      # Decoder activation function
  latent_dynamics_activation: sigmoid # null  # Latent dynamics activation function

# Loss function weights
loss_weights:
  w_recon: 1.0            # Reconstruction loss weight
  w_dyn_recon: 1.0        # Dynamics reconstruction loss weight
  w_dyn_cons: 1.0         # Dynamics consistency loss weight

# Visualization
visualization:
  n_grid_points: 50       # Grid resolution for visualization
  trajectory_steps: 100   # Steps to simulate for trajectory analysis
